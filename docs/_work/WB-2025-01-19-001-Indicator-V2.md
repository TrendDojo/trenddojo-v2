# WB-2025-01-19-001: Position Status Indicator V2

**State**: doing
**Timeframe**: NOW
**Created**: 2025-01-19
**Dependencies**: None
**Tags**: #positions #visualization #indicator

## Goal
Implement a completely new position status indicator (V2) based on refined business rules, with improved visual clarity and consistency. This will be displayed in a new column alongside the existing indicator for comparison.

## Business Rules

### Core Visual Elements
- **Total Width**: Fixed width container
- **Height**: Including indicators
- **All indicators positioned at their actual price points** (proportional within the range)

### Position Structure

#### Visual Layout
```
[Risk Segments] ▶ [Entry] ◎ [Reward Segments]
     (Stops)        $X        (Targets)
```

### Scaling Architecture (Symmetric)

#### **Left Side - Risk Management (Scaling Out Losses)**
- Multiple stop loss levels for graduated risk management
- Each segment represents a partial exit at a loss level
- Width proportional to quantity at each stop
- Segments ordered from max loss (leftmost) to min loss (nearest entry)

#### **Right Side - Profit Management (Scaling Out Wins)**
- Multiple target levels for graduated profit taking
- Each segment represents a partial exit at a profit level
- Width proportional to quantity at each target
- Segments ordered from first target to furthest target

### Position Types & States

#### 1. **Active Positions** (Open trades)

**Segments**:
- **Stop Loss Segments** (left of entry):
  - Hollow borders for unexecuted stops
  - Filled when stop is hit
  - Red borders for longs, green borders for shorts
- **Profit Target Segments** (right of entry):
  - Hollow borders for unexecuted targets
  - Filled when target is hit
  - Green fill for longs, red fill for shorts

**Indicators**:
- **Entry**:
  - **Play symbol** (▶) at entry price position
  - Points right (toward targets/future)
  - Neutral color (black/grey)
  - Larger hollow version for pending positions
- **Current Price**:
  - Indigo hollow circle with vertical line at current price
  - Line extends through segments to show position in range
- **Stop Indicator**:
  - Vertical line/bar at furthest stop position (maximum risk)
- **Target Indicator**:
  - **Bullseye symbol** (◎) at furthest target position
  - **Hollow/outer ring only** while position is active
  - **Filled/complete bullseye** (◉) when position is closed
  - Color matches direction (green for long, red for short)

#### 2. **Pending Positions** (Orders not yet filled)
- **Larger hollow play symbol** at order price
- **All segments shown as hollow** (both stops and targets)
- **Bullseye**: Hollow/outer ring only
- **No current price indicator** (position not yet active)

#### 3. **Closed Positions** (Completed trades)

**Profitable Exits**:
- **Stop segments**: Not shown (weren't hit)
- **Play symbol**: At entry price position
- **Profit segments**: Filled with direction color (green for long, red for short)
- **Unreached targets**: Filled grey
- **Bullseye**: Filled/complete (◉) - green for long, red for short
- **Exit indicator**: At actual exit price position

**Stopped Out Positions**:
- **Executed stop segments**: Filled (red for long, green for short)
- **Unexecuted stop segments**: Not shown or grey
- **Play symbol**: At entry price position
- **Target segments**: Grey (unreached)
- **Bullseye**: Filled/complete (◉) - position is complete even though target wasn't hit
- **Exit indicator**: At the stop price that was hit

### Color Rules (Non-Negotiable)

#### **Long Positions**
- Stop losses: **Red** (borders when pending, fills when hit)
- Profit targets: **Green** (borders when pending, fills when hit)
- Bullseye: **Green** (hollow when active, filled when closed)
- Text colors follow segment colors

#### **Short Positions**
- **EVERYTHING IS RED** (the short color)
- Stop losses: **Red**
- Profit targets: **Red**
- Bullseye: **Red**
- All text: **Red**

#### **Universal Colors**
- **Current Price**: Indigo (special indicator)
- **Entry (Play symbol)**: Black/grey (neutral)
- **Unreached/Missed**: Grey fill

### Price Label Positioning Rules
- **ALL labels must use the same variable gap distance from their indicators**
- **Labels positioned LEFT of indicator**: Text is right-aligned
- **Labels positioned RIGHT of indicator**: Text is left-aligned
- **The gap distance is identical** regardless of whether the label is on the left or right side
- **No exceptions** - every single label follows this rule

### Key Principles
1. **Symmetry**: Risk management (left) mirrors profit management (right)
2. **Price-Based Positioning**: Every element appears at its actual price position
3. **Consistent Colors**: Direction determines color scheme (Long=Green emphasis, Short=Red everything)
4. **Progressive Disclosure**: More segments = more sophisticated strategy
5. **Visual Story**: Start (▶), Aim (◎), with Protection (stops)
6. **Bullseye Status**: Hollow = still aiming, Filled = position complete
7. **Label Consistency**: Universal gap distance and alignment rules

### Symbol Legend
- **▶** Play = Entry point (start of journey)
- **◎** Hollow bullseye = Target (still aiming)
- **◉** Filled bullseye = Complete (journey ended)
- **|** Vertical line = Stop level (defensive barrier)
- **○** Hollow circle = Current price indicator

## Tasks
- [x] Document business rules
- [ ] Review design patterns and Claude notes
- [ ] Commit current V1 work
- [ ] Create new PositionIndicatorV2 component
- [ ] Add new column to positions table
- [ ] Implement price-based positioning for all indicators
- [ ] Implement play symbol for entry
- [ ] Implement bullseye for target
- [ ] Implement symmetric stop/target segments
- [ ] Implement consistent label positioning
- [ ] Test with various position states

## Notes
- Building from scratch without referencing old code
- Following established design patterns from docs
- Will display alongside V1 for comparison